<div align="center">

![quark-logo](img/icon.png)

# å¤¸å…‹ç½‘ç›˜è‡ªåŠ¨è½¬å­˜

å¤¸å…‹ç½‘ç›˜ç­¾åˆ°ã€è‡ªåŠ¨è½¬å­˜ã€å‘½åæ•´ç†ã€å‘æ¨é€æé†’å’Œåˆ·æ–°åª’ä½“åº“ä¸€æ¡é¾™ã€‚

å¯¹äºä¸€äº›æŒç»­æ›´æ–°çš„èµ„æºï¼Œéš”æ®µæ—¶é—´å»è½¬å­˜ååˆ†éº»çƒ¦ã€‚

å®šæœŸæ‰§è¡Œæœ¬è„šæœ¬è‡ªåŠ¨è½¬å­˜ã€æ–‡ä»¶åæ•´ç†ï¼Œé…åˆ [SmartStrm](https://github.com/Cp0204/SmartStrm) / [OpenList](https://github.com/OpenListTeam/OpenList) , Emby å¯è¾¾åˆ°è‡ªåŠ¨è¿½æ›´çš„æ•ˆæœã€‚ğŸ¥³


[![wiki][wiki-image]][wiki-url] [![github releases][gitHub-releases-image]][github-url] [![docker pulls][docker-pulls-image]][docker-url] [![docker image size][docker-image-size-image]][docker-url]

[wiki-image]: https://img.shields.io/badge/wiki-Documents-green?logo=github
[gitHub-releases-image]: https://img.shields.io/github/v/release/Cp0204/quark-auto-save?logo=github
[docker-pulls-image]: https://img.shields.io/docker/pulls/cp0204/quark-auto-save?logo=docker&&logoColor=white
[docker-image-size-image]: https://img.shields.io/docker/image-size/cp0204/quark-auto-save?logo=docker&&logoColor=white
[github-url]: https://github.com/Cp0204/quark-auto-save
[docker-url]: https://hub.docker.com/r/cp0204/quark-auto-save
[wiki-url]: https://github.com/Cp0204/quark-auto-save/wiki

![run_log](img/run_log.png)

</div>

> [!CAUTION]
> â›”ï¸â›”ï¸â›”ï¸ æ³¨æ„ï¼èµ„æºä¸ä¼šæ¯æ—¶æ¯åˆ»æ›´æ–°ï¼Œ**ä¸¥ç¦è®¾å®šè¿‡é«˜çš„å®šæ—¶è¿è¡Œé¢‘ç‡ï¼** ä»¥å…è´¦å·é£æ§å’Œç»™å¤¸å…‹æœåŠ¡å™¨é€ æˆä¸å¿…è¦çš„å‹åŠ›ã€‚é›ªå±±å´©å¡Œï¼Œæ¯ä¸€ç‰‡é›ªèŠ±éƒ½æœ‰è´£ä»»ï¼

> [!NOTE]
> å¼€å‘è€…â‰ å®¢æœï¼Œå¼€æºå…è´¹â‰ å¸®ä½ è§£å†³ä½¿ç”¨é—®é¢˜ï¼›æœ¬é¡¹ç›® Wiki å·²ç»ç›¸å¯¹å®Œå–„ï¼Œé‡åˆ°é—®é¢˜è¯·å…ˆç¿»é˜… Issues å’Œ Wiki ï¼Œè¯·å‹¿ç›²ç›®å‘é—®ã€‚

## åŠŸèƒ½

- éƒ¨ç½²æ–¹å¼
  - [x] å¯èƒ½~~å…¼å®¹é’é¾™~~
  - [x] Docker éƒ¨ç½²ï¼ŒWebUI é…ç½®

- åˆ†äº«é“¾æ¥
  - [x] æ”¯æŒåˆ†äº«é“¾æ¥çš„å­ç›®å½•
  - [x] è®°å½•å¤±æ•ˆåˆ†äº«å¹¶è·³è¿‡ä»»åŠ¡
  - [x] æ”¯æŒéœ€æå–ç çš„åˆ†äº«é“¾æ¥ <sup>[?](https://github.com/Cp0204/quark-auto-save/wiki/ä½¿ç”¨æŠ€å·§é›†é”¦#æ”¯æŒéœ€æå–ç çš„åˆ†äº«é“¾æ¥)</sup>
  - [x] æ™ºèƒ½æœç´¢èµ„æºå¹¶è‡ªåŠ¨å¡«å…… <sup>[?](https://github.com/Cp0204/quark-auto-save/wiki/CloudSaveræœç´¢æº)</sup>

- æ–‡ä»¶ç®¡ç†
  - [x] ç›®æ ‡ç›®å½•ä¸å­˜åœ¨æ—¶è‡ªåŠ¨æ–°å»º
  - [x] è·³è¿‡å·²è½¬å­˜è¿‡çš„æ–‡ä»¶
  - [x] æ­£åˆ™è¿‡æ»¤è¦è½¬å­˜çš„æ–‡ä»¶å
  - [x] è½¬å­˜åæ–‡ä»¶åæ•´ç†ï¼ˆæ­£åˆ™æ›¿æ¢ï¼‰
  - [x] å¯é€‰å¿½ç•¥æ–‡ä»¶åç¼€

- ä»»åŠ¡ç®¡ç†
  - [x] æ”¯æŒå¤šç»„ä»»åŠ¡
  - [x] ä»»åŠ¡ç»“æŸæœŸé™ï¼ŒæœŸé™åä¸æ‰§è¡Œæ­¤ä»»åŠ¡
  - [x] å¯å•ç‹¬æŒ‡å®šå­ä»»åŠ¡æ˜ŸæœŸå‡ æ‰§è¡Œ

- åª’ä½“åº“æ•´åˆ
  - [x] æ ¹æ®ä»»åŠ¡åæœç´¢ Emby åª’ä½“åº“
  - [x] è¿½æ›´æˆ–æ•´ç†åè‡ªåŠ¨åˆ·æ–° Emby åª’ä½“åº“
  - [x] åª’ä½“åº“æ¨¡å—åŒ–ï¼Œç”¨æˆ·å¯å¾ˆæ–¹ä¾¿åœ°[å¼€å‘è‡ªå·±çš„åª’ä½“åº“hookæ¨¡å—](./plugins)

- å…¶å®ƒ
  - [x] æ¯æ—¥ç­¾åˆ°é¢†ç©ºé—´ <sup>[?](https://github.com/Cp0204/quark-auto-save/wiki/ä½¿ç”¨æŠ€å·§é›†é”¦#æ¯æ—¥ç­¾åˆ°é¢†ç©ºé—´)</sup>
  - [x] æ”¯æŒå¤šä¸ªé€šçŸ¥æ¨é€æ¸ é“ <sup>[?](https://github.com/Cp0204/quark-auto-save/wiki/é€šçŸ¥æ¨é€æœåŠ¡é…ç½®)</sup>
  - [x] æ”¯æŒå¤šè´¦å·ï¼ˆå¤šè´¦å·ç­¾åˆ°ï¼Œä»…é¦–è´¦å·è½¬å­˜ï¼‰

## éƒ¨ç½²

### Docker éƒ¨ç½²

Docker éƒ¨ç½²æä¾› WebUI ç®¡ç†é…ç½®ï¼Œå›¾å½¢åŒ–é…ç½®å·²èƒ½æ»¡è¶³ç»å¤§å¤šæ•°éœ€æ±‚ã€‚éƒ¨ç½²å‘½ä»¤ï¼š

```shell
docker run -d \
  --name quark-auto-save \
  -p 5005:5005 \ # æ˜ å°„ç«¯å£ï¼Œ:å‰çš„å¯ä»¥æ”¹ï¼Œå³éƒ¨ç½²åè®¿é—®çš„ç«¯å£ï¼Œ:åçš„ä¸å¯æ”¹
  -e WEBUI_USERNAME=admin \
  -e WEBUI_PASSWORD=admin123 \
  -v ./quark-auto-save/config:/app/config \ # å¿…é¡»ï¼Œé…ç½®æŒä¹…åŒ–
  -v ./quark-auto-save/media:/media \ # å¯é€‰ï¼Œæ¨¡å—alist_strm_genç”Ÿæˆstrmä½¿ç”¨
  --network bridge \
  --restart unless-stopped \
  cp0204/quark-auto-save:latest
  # registry.cn-shenzhen.aliyuncs.com/cp0204/quark-auto-save:latest # å›½å†…é•œåƒåœ°å€
```

docker-compose.yml

```yaml
name: quark-auto-save
services:
  quark-auto-save:
    image: cp0204/quark-auto-save:latest
    container_name: quark-auto-save
    network_mode: bridge
    ports:
      - 5005:5005
    restart: unless-stopped
    environment:
      WEBUI_USERNAME: "admin"
      WEBUI_PASSWORD: "admin123"
    volumes:
      - ./quark-auto-save/config:/app/config
      - ./quark-auto-save/media:/media
```

ç®¡ç†åœ°å€ï¼šhttp://yourhost:5005

| ç¯å¢ƒå˜é‡         | é»˜è®¤       | å¤‡æ³¨                                     |
| ---------------- | ---------- | ---------------------------------------- |
| `WEBUI_USERNAME` | `admin`    | ç®¡ç†è´¦å·                                 |
| `WEBUI_PASSWORD` | `admin123` | ç®¡ç†å¯†ç                                  |
| `PORT`           | `5005`     | ç®¡ç†åå°ç«¯å£                             |
| `PLUGIN_FLAGS`   |            | æ’ä»¶æ ‡å¿—ï¼Œå¦‚ `-emby,-aria2` ç¦ç”¨æŸäº›æ’ä»¶ |

#### ä¸€é”®æ›´æ–°

```shell
docker run --rm -v /var/run/docker.sock:/var/run/docker.sock containrrr/watchtower -cR quark-auto-save
```

<details open>
<summary>WebUI é¢„è§ˆ</summary>

![screenshot_webui](img/screenshot_webui-1.png)

![screenshot_webui](img/screenshot_webui-2.png)

</details>

## ä½¿ç”¨è¯´æ˜

### æ­£åˆ™å¤„ç†ç¤ºä¾‹

| pattern                                | replace                 | æ•ˆæœ                                                                   |
| -------------------------------------- | ----------------------- | ---------------------------------------------------------------------- |
| `.*`                                   |                         | æ— è„‘è½¬å­˜æ‰€æœ‰æ–‡ä»¶ï¼Œä¸æ•´ç†                                               |
| `\.mp4$`                               |                         | è½¬å­˜æ‰€æœ‰ `.mp4` åç¼€çš„æ–‡ä»¶                                             |
| `^ã€ç”µå½±TTã€‘èŠ±å¥½æœˆåœ†(\d+)\.(mp4\|mkv)` | `\1.\2`                 | ã€ç”µå½±TTã€‘èŠ±å¥½æœˆåœ†01.mp4 â†’ 01.mp4<br>ã€ç”µå½±TTã€‘èŠ±å¥½æœˆåœ†02.mkv â†’ 02.mkv |
| `^(\d+)\.mp4`                          | `S02E\1.mp4`            | 01.mp4 â†’ S02E01.mp4<br>02.mp4 â†’ S02E02.mp4                             |
| `$TV`                                  |                         | [é­”æ³•åŒ¹é…](#é­”æ³•åŒ¹é…)å‰§é›†æ–‡ä»¶                                          |
| `^(\d+)\.mp4`                          | `{TASKNAME}.S02E\1.mp4` | 01.mp4 â†’ ä»»åŠ¡å.S02E01.mp4                                             |

æ›´å¤šæ­£åˆ™ä½¿ç”¨è¯´æ˜ï¼š[æ­£åˆ™å¤„ç†æ•™ç¨‹](https://github.com/Cp0204/quark-auto-save/wiki/æ­£åˆ™å¤„ç†æ•™ç¨‹)

> [!TIP]
>
> **é­”æ³•åŒ¹é…å’Œé­”æ³•å˜é‡**ï¼šåœ¨æ­£åˆ™å¤„ç†ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€äº›â€œé­”æ³•åŒ¹é…â€æ¨¡å¼ï¼Œå¦‚æœ è¡¨è¾¾å¼ çš„å€¼ä»¥ $ å¼€å¤´ä¸” æ›¿æ¢å¼ ç•™ç©ºï¼Œç¨‹åºå°†è‡ªåŠ¨ä½¿ç”¨é¢„è®¾çš„æ­£åˆ™è¡¨è¾¾å¼è¿›è¡ŒåŒ¹é…å’Œæ›¿æ¢ã€‚
>
> è‡ª v0.6.0 å¼€å§‹ï¼Œæ”¯æŒæ›´å¤šä»¥ {} åŒ…è£¹çš„æˆ‘ç§°ä¹‹ä¸ºâ€œé­”æ³•å˜é‡â€ï¼Œå¯ä»¥æ›´çµæ´»åœ°è¿›è¡Œé‡å‘½åã€‚
>
> æ›´å¤šè¯´æ˜è¯·çœ‹[é­”æ³•åŒ¹é…å’Œé­”æ³•å˜é‡](https://github.com/Cp0204/quark-auto-save/wiki/é­”æ³•åŒ¹é…å’Œé­”æ³•å˜é‡)

### åˆ·æ–°åª’ä½“åº“

åœ¨æœ‰æ–°è½¬å­˜æ—¶ï¼Œå¯è§¦å‘å®Œæˆç›¸åº”åŠŸèƒ½ï¼Œå¦‚è‡ªåŠ¨åˆ·æ–°åª’ä½“åº“ã€ç”Ÿæˆ .strm æ–‡ä»¶ç­‰ã€‚é…ç½®æŒ‡å—ï¼š[æ’ä»¶é…ç½®](https://github.com/Cp0204/quark-auto-save/wiki/æ’ä»¶é…ç½®)

åª’ä½“åº“æ¨¡å—ä»¥æ’ä»¶çš„æ–¹å¼çš„é›†æˆï¼Œå¦‚æœä½ æœ‰å…´è¶£è¯·å‚è€ƒ[æ’ä»¶å¼€å‘æŒ‡å—](https://github.com/Cp0204/quark-auto-save/tree/main/plugins)ã€‚

### æ›´å¤šä½¿ç”¨æŠ€å·§

è¯·å‚è€ƒ Wiki ï¼š[ä½¿ç”¨æŠ€å·§é›†é”¦](https://github.com/Cp0204/quark-auto-save/wiki/ä½¿ç”¨æŠ€å·§é›†é”¦)

## ç”Ÿæ€é¡¹ç›®

ä»¥ä¸‹å±•ç¤º QAS ç”Ÿæ€é¡¹ç›®ï¼ŒåŒ…æ‹¬å®˜æ–¹é¡¹ç›®å’Œç¬¬ä¸‰æ–¹é¡¹ç›®ã€‚

### å®˜æ–¹é¡¹ç›®

* [QASä¸€é”®æ¨é€åŠ©æ‰‹](https://greasyfork.org/zh-CN/scripts/533201-qasä¸€é”®æ¨é€åŠ©æ‰‹)

  æ²¹çŒ´è„šæœ¬ï¼Œåœ¨å¤¸å…‹ç½‘ç›˜åˆ†äº«é¡µé¢æ·»åŠ æ¨é€åˆ° QAS çš„æŒ‰é’®

* [SmartStrm](https://github.com/Cp0204/SmartStrm)

  STRM æ–‡ä»¶ç”Ÿæˆå·¥å…·ï¼Œç”¨äºè½¬å­˜åå¤„ç†ï¼Œåª’ä½“å…ä¸‹è½½å…¥åº“æ’­æ”¾ã€‚

### ç¬¬ä¸‰æ–¹å¼€æºé¡¹ç›®

> [!TIP]
>
> ä»¥ä¸‹ç¬¬ä¸‰æ–¹å¼€æºé¡¹ç›®å‡ç”±ç¤¾åŒºå¼€å‘å¹¶ä¿æŒå¼€æºï¼Œä¸ QAS ä½œè€…æ— ç›´æ¥å…³è”ã€‚åœ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒå‰ï¼Œè¯·è‡ªè¡Œè¯„ä¼°ç›¸å…³é£é™©ã€‚
>
> å¦‚æœæ‚¨æœ‰æ–°çš„é¡¹ç›®æ²¡æœ‰åœ¨æ­¤åˆ—å‡ºï¼Œå¯ä»¥é€šè¿‡ Issues æäº¤ã€‚

* [nonebot-plugin-quark-autosave](https://github.com/fllesser/nonebot-plugin-quark-autosave)

  QAS Telegram æœºå™¨äººï¼Œå¿«é€Ÿç®¡ç†è‡ªåŠ¨è½¬å­˜ä»»åŠ¡

* [Astrbot_plugin_quarksave](https://github.com/lm379/astrbot_plugin_quarksave)

  AstrBot æ’ä»¶ï¼Œè°ƒç”¨ quark_auto_save å®ç°è‡ªåŠ¨è½¬å­˜èµ„æºåˆ°å¤¸å…‹ç½‘ç›˜

## æ‰“èµ

å¦‚æœè¿™ä¸ªé¡¹ç›®è®©ä½ å—ç›Šï¼Œä½ å¯ä»¥æ— å¿èµ ä¸æˆ‘1å—é’±ï¼Œè®©æˆ‘çŸ¥é“å¼€æºæœ‰ä»·å€¼ã€‚è°¢è°¢ï¼

![WeChatPay](https://cdn.jsdelivr.net/gh/Cp0204/Cp0204@main/img/wechat_pay_qrcode.png)

## å£°æ˜

æœ¬é¡¹ç›®ä¸ºä¸ªäººå…´è¶£å¼€å‘ï¼Œæ—¨åœ¨é€šè¿‡ç¨‹åºè‡ªåŠ¨åŒ–æé«˜ç½‘ç›˜ä½¿ç”¨æ•ˆç‡ã€‚

ç¨‹åºæ²¡æœ‰ä»»ä½•ç ´è§£è¡Œä¸ºï¼Œåªæ˜¯å¯¹äºå¤¸å…‹å·²æœ‰çš„APIè¿›è¡Œå°è£…ï¼Œæ‰€æœ‰æ•°æ®æ¥è‡ªäºå¤¸å…‹å®˜æ–¹APIï¼›æœ¬äººä¸å¯¹ç½‘ç›˜å†…å®¹è´Ÿè´£ã€ä¸å¯¹å¤¸å…‹å®˜æ–¹APIæœªæ¥å¯èƒ½çš„å˜åŠ¨å¯¼è‡´çš„å½±å“è´Ÿè´£ï¼Œè¯·è‡ªè¡Œæ–Ÿé…Œä½¿ç”¨ã€‚

å¼€æºä»…ä¾›å­¦ä¹ ä¸äº¤æµä½¿ç”¨ï¼Œæœªç›ˆåˆ©ä¹Ÿæœªæˆæƒå•†ä¸šä½¿ç”¨ï¼Œä¸¥ç¦ç”¨äºéæ³•ç”¨é€”ã€‚

## Sponsor

CDN acceleration and security protection for this project are sponsored by Tencent EdgeOne.

<a href="https://edgeone.ai/?from=github" target="_blank"><img title="Best Asian CDN, Edge, and Secure Solutions - Tencent EdgeOne" src="https://edgeone.ai/media/34fe3a45-492d-4ea4-ae5d-ea1087ca7b4b.png" width="300"></a>